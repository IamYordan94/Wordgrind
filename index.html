<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progressive Wordle Grind</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #2a2a2a;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #6aaa64;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        /* Stats Section */
        .stats-section {
            background-color: #3a3a3a;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
            margin: 5px;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #6aaa64;
        }

        .stat-label {
            font-size: 0.9em;
            color: #ccc;
        }

        /* Category Selector */
        .category-selector {
            background-color: #3a3a3a;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .category-selector h3 {
            margin-bottom: 10px;
            color: #6aaa64;
            font-size: 1.1em;
        }

        .category-dropdown {
            position: relative;
            display: inline-block;
            width: 250px;
        }

        .category-current {
            background: #4a4a4a;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            width: 100%;
            text-align: left;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1em;
        }

        .category-current:hover {
            background: #5a5a5a;
        }

        .category-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: #4a4a4a;
            border-radius: 5px;
            border: 1px solid #666;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .category-options.show {
            display: block;
        }

        .category-option {
            padding: 10px 15px;
            cursor: pointer;
            border: none;
            background: none;
            color: white;
            width: 100%;
            text-align: left;
            font-size: 1em;
        }

        .category-option:hover {
            background: #5a5a5a;
        }

        /* Level Selector */
        .level-selector {
            background-color: #3a3a3a;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .level-selector h3 {
            margin-bottom: 15px;
            color: #6aaa64;
            text-align: center;
            font-size: 1.3em;
        }

        .level-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .level-btn {
            background: #4a4a4a;
            color: white;
            border: none;
            padding: 12px 18px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .level-btn:hover {
            background: #5a5a5a;
        }

        .level-btn.current {
            background: #6aaa64;
            color: white;
        }

        .level-btn.completed {
            background: #4a90e2;
            color: white;
        }

        .level-btn:disabled {
            background: #333;
            color: #666;
            cursor: not-allowed;
        }

        /* Game Info */
        .game-info {
            background-color: #3a3a3a;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .level-info {
            font-size: 1.2em;
            margin-bottom: 10px;
            color: #6aaa64;
        }

        .progress-info {
            font-size: 1em;
            color: #ccc;
        }

        /* Input Section */
        .input-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
            justify-content: center;
        }

        #wordInput {
            padding: 15px;
            font-size: 1.2em;
            border: 2px solid #4a4a4a;
            border-radius: 5px;
            background-color: #3a3a3a;
            color: white;
            text-align: center;
            text-transform: uppercase;
            width: 200px;
        }

        #wordInput:focus {
            outline: none;
            border-color: #6aaa64;
        }

        .submit-btn {
            background: #6aaa64;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s;
        }

        .submit-btn:hover {
            background: #5a9954;
        }

        /* Hint System */
        .hint-section {
            background-color: #3a3a3a;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .hint-btn {
            background: #e2a947;
            color: #1a1a1a;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
        }

        .hint-btn:hover {
            background: #d49836;
            transform: translateY(-1px);
        }

        .hint-display {
            background-color: rgba(106, 170, 100, 0.1);
            border: 1px solid #6aaa64;
            border-radius: 5px;
            padding: 15px;
            margin-top: 15px;
            display: none;
        }

        /* Hint Choice Modal */
        .hint-choice-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .hint-choice-content {
            background: #3a3a3a;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .hint-choice-title {
            color: white;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: bold;
        }

        .hint-choice-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .hint-choice-btn {
            background: #6aaa64;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background-color 0.3s;
        }

        .hint-choice-btn:hover {
            background: #5a9954;
        }

        /* Feedback */
        .feedback, .message {
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            display: none;
        }

        .feedback.success, .message.success {
            background-color: rgba(106, 170, 100, 0.2);
            border: 1px solid #6aaa64;
            color: #6aaa64;
        }

        .feedback.error, .message.error {
            background-color: rgba(220, 53, 69, 0.2);
            border: 1px solid #dc3545;
            color: #dc3545;
        }

        .feedback.info, .message.info {
            background-color: rgba(52, 144, 220, 0.2);
            border: 1px solid #3490dc;
            color: #3490dc;
        }

        /* Found Words */
        .found-words {
            background-color: #3a3a3a;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .found-words h3 {
            color: #6aaa64;
            margin-bottom: 10px;
            text-align: center;
        }

        .words-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .word-item {
            background: #4a4a4a;
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 0.9em;
        }

        /* Control Buttons */
        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .control-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.3s;
        }

        .control-btn:hover {
            background: #c82333;
        }

        .control-btn.secondary {
            background: #6c757d;
        }

        .control-btn.secondary:hover {
            background: #5a6268;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
                margin: 10px;
            }

            .input-section {
                flex-direction: column;
            }

            #wordInput {
                width: 100%;
            }

            .hint-choice-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéÆ Progressive Wordle Grind</h1>
        
        <!-- Stats Section -->
        <div class="stats-section">
            <div class="stat-item">
                <div class="stat-value" id="currentStreak">0</div>
                <div class="stat-label">Day Streak</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalWords">0</div>
                <div class="stat-label">Words Found</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalLevels">0</div>
                <div class="stat-label">Levels Completed</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="achievements">0</div>
                <div class="stat-label">Achievements</div>
            </div>
        </div>

        <!-- Category Selector -->
        <div class="category-selector">
            <h3>üìö Word Category</h3>
            <div class="category-dropdown">
                <button class="category-current" id="categoryCurrentBtn">
                    <span id="currentCategoryName">General Words</span>
                    <span>‚ñº</span>
                </button>
                <div class="category-options" id="categoryOptions"></div>
            </div>
        </div>

        <!-- Level Selector -->
        <div class="level-selector">
            <h3>üéØ Select Level</h3>
            <div class="level-buttons" id="levelButtons"></div>
        </div>

        <!-- Game Info -->
        <div class="game-info">
            <div class="level-info">
                Level <span id="currentLevel">1</span> - <span id="wordLength">2</span>-Letter Words
            </div>
            <div class="progress-info">
                Found: <span id="foundCount">0</span> / <span id="totalCount">0</span> words 
                (<span id="progressPercent">0</span>%)
            </div>
        </div>

        <!-- Input Section -->
        <div class="input-section">
            <input type="text" id="wordInput" placeholder="Enter 2-letter word" maxlength="2">
            <button class="submit-btn" id="submitBtn">Submit</button>
        </div>

        <!-- Hint System -->
        <div class="hint-section">
            <button id="watchAdForHintBtn" class="hint-btn">üì∫ Watch Ad for Hint</button>
            <div class="hint-display" id="hintDisplay"></div>
        </div>

        <!-- Feedback -->
        <div class="feedback" id="feedback"></div>
        <div class="message" id="message"></div>

        <!-- Found Words -->
        <div class="found-words">
            <h3>Found Words</h3>
            <div class="words-grid" id="foundWordsGrid"></div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <button class="control-btn secondary" id="resetLevelBtn">Reset Level</button>
            <button class="control-btn" id="resetGameBtn">Reset Game</button>
            <button class="control-btn secondary" id="shareBtn">Share Progress</button>
        </div>

        <!-- Hint Choice Modal -->
        <div class="hint-choice-modal" id="hintChoiceModal">
            <div class="hint-choice-content">
                <div class="hint-choice-title">Choose Your Hint</div>
                <div class="hint-choice-buttons">
                    <button class="hint-choice-btn" data-hint="letter">üìù Letter Reveal</button>
                    <button class="hint-choice-btn" data-hint="keyboard">‚å®Ô∏è Gray Keys</button>
                    <button class="hint-choice-btn" data-hint="basic">üí° Basic Hint</button>
                    <button class="hint-choice-btn" data-hint="scramble">üîÄ Scramble Game</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        class ProgressiveWordleGame {
            constructor() {
                this.maxLevel = 10;
                this.currentLevel = 1;
                this.currentCategory = 'general';
                
                // Categories with all unlocked by default
                this.categories = {
                    general: 'General Words',
                    food: 'Food & Drinks',
                    animals: 'Animals',
                    movies: 'Movies & TV',
                    sports: 'Sports',
                    science: 'Science & Tech'
                };

                // Word lists for each category
                this.categoryWordLists = {
                    general: {
                        2: ['is', 'at', 'it', 'on', 'be', 'to', 'of', 'in', 'we', 'my', 'or', 'an', 'me', 'as', 'up', 'so', 'no', 'if', 'do', 'go'],
                        3: ['the', 'and', 'for', 'are', 'but', 'not', 'you', 'all', 'can', 'had', 'her', 'was', 'one', 'our', 'out', 'day', 'get', 'use', 'man', 'new'],
                        4: ['that', 'with', 'have', 'this', 'will', 'your', 'from', 'they', 'know', 'want', 'been', 'good', 'much', 'some', 'time', 'very', 'when', 'come', 'here', 'just'],
                        5: ['which', 'their', 'would', 'there', 'could', 'other', 'after', 'first', 'never', 'these', 'think', 'where', 'being', 'every', 'great', 'might', 'shall', 'still', 'those', 'under']
                    },
                    food: {
                        2: ['ox', 'pi'],
                        3: ['egg', 'ham', 'tea', 'pie', 'ice', 'jam', 'oil', 'nut', 'fig', 'yam'],
                        4: ['rice', 'fish', 'meat', 'milk', 'cake', 'soup', 'wine', 'beef', 'corn', 'bean'],
                        5: ['bread', 'apple', 'water', 'sugar', 'lemon', 'honey', 'pasta', 'pizza', 'grape', 'salad']
                    },
                    animals: {
                        2: ['ox'],
                        3: ['cat', 'dog', 'pig', 'cow', 'rat', 'bat', 'bee', 'fly', 'ant', 'owl'],
                        4: ['lion', 'bear', 'deer', 'fish', 'bird', 'frog', 'duck', 'goat', 'wolf', 'seal'],
                        5: ['horse', 'sheep', 'whale', 'shark', 'eagle', 'snake', 'tiger', 'mouse', 'llama', 'panda']
                    },
                    movies: {
                        2: ['ET'],
                        3: ['top', 'war', 'her', 'big', 'out', 'run', 'spy', 'cop', 'toy', 'bad'],
                        4: ['star', 'hero', 'love', 'fear', 'hope', 'wild', 'lost', 'dark', 'cold', 'fast'],
                        5: ['space', 'magic', 'ghost', 'robot', 'alien', 'fight', 'peace', 'dream', 'power', 'brave']
                    },
                    sports: {
                        2: ['go'],
                        3: ['run', 'win', 'bat', 'net', 'cup', 'gym', 'lap', 'ski', 'box', 'row'],
                        4: ['game', 'team', 'goal', 'race', 'jump', 'kick', 'ball', 'play', 'swim', 'dive'],
                        5: ['score', 'match', 'coach', 'field', 'court', 'track', 'medal', 'sport', 'train', 'speed']
                    },
                    science: {
                        2: ['AI', 'UV'],
                        3: ['DNA', 'lab', 'ray', 'gas', 'ion', 'web', 'app', 'bot', 'bug', 'bit'],
                        4: ['atom', 'gene', 'code', 'data', 'tech', 'chip', 'link', 'file', 'cell', 'test'],
                        5: ['space', 'brain', 'solar', 'laser', 'robot', 'virus', 'earth', 'ocean', 'orbit', 'virus']
                    }
                };

                this.wordLists = this.categoryWordLists[this.currentCategory];
                this.foundWords = {};
                this.attemptedWords = {};
                this.gameStats = {
                    currentStreak: 0,
                    totalWordsFound: 0,
                    totalLevelsCompleted: 0,
                    achievements: [],
                    lastPlayDate: null,
                    fastestCompletions: {}
                };

                this.levelStartTime = null;
                this.initializeElements();
                this.loadGameState();
                this.bindEvents();
                this.updateDisplay();
                this.createLevelButtons();
                this.createCategoryDropdown();
                this.checkDailyLogin();
            }

            initializeElements() {
                this.elements = {
                    wordInput: document.getElementById('wordInput'),
                    submitBtn: document.getElementById('submitBtn'),
                    feedback: document.getElementById('feedback'),
                    message: document.getElementById('message'),
                    currentLevel: document.getElementById('currentLevel'),
                    wordLength: document.getElementById('wordLength'),
                    foundCount: document.getElementById('foundCount'),
                    totalCount: document.getElementById('totalCount'),
                    progressPercent: document.getElementById('progressPercent'),
                    foundWordsGrid: document.getElementById('foundWordsGrid'),
                    levelButtons: document.getElementById('levelButtons'),
                    resetLevelBtn: document.getElementById('resetLevelBtn'),
                    resetGameBtn: document.getElementById('resetGameBtn'),
                    shareBtn: document.getElementById('shareBtn'),
                    watchAdForHintBtn: document.getElementById('watchAdForHintBtn'),
                    hintDisplay: document.getElementById('hintDisplay'),
                    hintChoiceModal: document.getElementById('hintChoiceModal'),
                    categoryCurrentBtn: document.getElementById('categoryCurrentBtn'),
                    categoryOptions: document.getElementById('categoryOptions'),
                    currentCategoryName: document.getElementById('currentCategoryName'),
                    currentStreak: document.getElementById('currentStreak'),
                    totalWords: document.getElementById('totalWords'),
                    totalLevels: document.getElementById('totalLevels'),
                    achievements: document.getElementById('achievements')
                };
            }

            bindEvents() {
                this.elements.wordInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.submitGuess();
                    }
                });

                this.elements.wordInput.addEventListener('input', (e) => {
                    e.target.value = e.target.value.toUpperCase();
                });

                this.elements.submitBtn.addEventListener('click', () => {
                    this.submitGuess();
                });

                this.elements.resetLevelBtn.addEventListener('click', () => {
                    this.resetCurrentLevel();
                });

                this.elements.resetGameBtn.addEventListener('click', () => {
                    this.resetEntireGame();
                });

                this.elements.shareBtn.addEventListener('click', () => {
                    this.shareProgress();
                });

                this.elements.watchAdForHintBtn.addEventListener('click', () => {
                    this.watchAdForHint();
                });

                this.elements.categoryCurrentBtn.addEventListener('click', () => {
                    this.toggleCategoryDropdown();
                });

                // Hint choice modal events
                const hintChoiceButtons = document.querySelectorAll('.hint-choice-btn');
                hintChoiceButtons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const hintType = e.target.getAttribute('data-hint');
                        this.applySelectedHint(hintType);
                        this.closeHintChoiceModal();
                    });
                });

                // Close dropdowns when clicking outside
                document.addEventListener('click', (e) => {
                    if (!this.elements.categoryCurrentBtn.contains(e.target)) {
                        this.elements.categoryOptions.classList.remove('show');
                    }
                    if (e.target === this.elements.hintChoiceModal) {
                        this.closeHintChoiceModal();
                    }
                });
            }

            createLevelButtons() {
                this.elements.levelButtons.innerHTML = '';
                
                for (let level = 1; level <= this.maxLevel; level++) {
                    const button = document.createElement('button');
                    button.className = 'level-btn';
                    button.textContent = `Level ${level} (${level + 1}-letter)`;
                    
                    if (level === this.currentLevel) {
                        button.classList.add('current');
                    } else if (this.isLevelCompleted(level)) {
                        button.classList.add('completed');
                    }
                    
                    button.addEventListener('click', () => {
                        if (level !== this.currentLevel) {
                            this.switchLevel(level);
                        }
                    });
                    
                    this.elements.levelButtons.appendChild(button);
                }
            }

            createCategoryDropdown() {
                this.elements.categoryOptions.innerHTML = '';
                
                Object.keys(this.categories).forEach(categoryKey => {
                    const option = document.createElement('button');
                    option.className = 'category-option';
                    option.textContent = this.categories[categoryKey];
                    
                    option.addEventListener('click', () => {
                        if (categoryKey !== this.currentCategory) {
                            this.switchCategory(categoryKey);
                        }
                        this.elements.categoryOptions.classList.remove('show');
                    });
                    
                    this.elements.categoryOptions.appendChild(option);
                });
                
                this.elements.currentCategoryName.textContent = this.categories[this.currentCategory];
            }

            toggleCategoryDropdown() {
                this.elements.categoryOptions.classList.toggle('show');
            }

            switchLevel(level) {
                this.currentLevel = level;
                this.levelStartTime = null;
                this.updateInputMaxLength();
                this.updateDisplay();
                this.createLevelButtons();
                this.clearFeedback();
                this.saveGameState();
                this.showMessage(`Switched to Level ${level}!`, 'success');
            }

            switchCategory(categoryKey) {
                this.currentCategory = categoryKey;
                this.wordLists = this.categoryWordLists[categoryKey];
                
                // Initialize found words for new category if needed
                for (let level = 1; level <= this.maxLevel; level++) {
                    if (!this.foundWords[level]) this.foundWords[level] = [];
                    if (!this.attemptedWords[level]) this.attemptedWords[level] = [];
                }
                
                this.updateInputMaxLength();
                this.updateDisplay();
                this.createCategoryDropdown();
                this.saveGameState();
                this.showMessage(`Switched to ${this.categories[categoryKey]} category!`, 'success');
            }

            isLevelCompleted(level) {
                const foundInLevel = this.foundWords[level] || [];
                const totalInLevel = this.getTotalWordsForLevel(level);
                return foundInLevel.length >= totalInLevel;
            }

            getTotalWordsForLevel(level) {
                const wordLength = level + 1;
                const wordsForLength = this.wordLists[wordLength] || [];
                return wordsForLength.length;
            }

            getAvailableWordsForLevel(level) {
                const wordLength = level + 1;
                const allWords = this.wordLists[wordLength] || [];
                const foundInPreviousLevel = this.foundWords[level - 1] || [];
                
                let availablePercent = 100;
                if (level > 1) {
                    const previousProgress = foundInPreviousLevel.length / this.getTotalWordsForLevel(level - 1);
                    if (level === 2) {
                        availablePercent = Math.min(100, 20 + (previousProgress * 80));
                    } else if (level === 3) {
                        availablePercent = Math.min(100, 10 + (previousProgress * 90));
                    } else {
                        availablePercent = Math.min(100, 5 + (previousProgress * 95));
                    }
                }
                
                const availableCount = Math.ceil((availablePercent / 100) * allWords.length);
                return allWords.slice(0, availableCount);
            }

            updateInputMaxLength() {
                const wordLength = this.currentLevel + 1;
                this.elements.wordInput.maxLength = wordLength;
                this.elements.wordInput.placeholder = `Enter ${wordLength}-letter word`;
            }

            submitGuess() {
                const guess = this.elements.wordInput.value.trim().toLowerCase();
                const wordLength = this.currentLevel + 1;
                
                if (!this.levelStartTime) {
                    this.levelStartTime = Date.now();
                }
                
                if (guess.length !== wordLength) {
                    this.showFeedback(`Please enter a ${wordLength}-letter word`, 'error');
                    return;
                }
                
                const availableWords = this.getAvailableWordsForLevel(this.currentLevel);
                const foundInLevel = this.foundWords[this.currentLevel] || [];
                const attemptedInLevel = this.attemptedWords[this.currentLevel] || [];
                
                if (foundInLevel.includes(guess)) {
                    this.showFeedback('Already found this word!', 'error');
                    return;
                }
                
                if (attemptedInLevel.includes(guess)) {
                    this.showFeedback('Already tried this word!', 'error');
                    return;
                }
                
                if (availableWords.includes(guess)) {
                    // Correct word
                    if (!this.foundWords[this.currentLevel]) {
                        this.foundWords[this.currentLevel] = [];
                    }
                    this.foundWords[this.currentLevel].push(guess);
                    this.gameStats.totalWordsFound++;
                    
                    this.showFeedback(`Correct! Found "${guess.toUpperCase()}"`, 'success');
                    this.elements.wordInput.value = '';
                    this.updateDisplay();
                    this.checkLevelCompletion();
                } else {
                    // Incorrect word
                    if (!this.attemptedWords[this.currentLevel]) {
                        this.attemptedWords[this.currentLevel] = [];
                    }
                    this.attemptedWords[this.currentLevel].push(guess);
                    this.showFeedback('Word not in list or not available yet', 'error');
                    this.elements.wordInput.value = '';
                }
                
                this.saveGameState();
            }

            checkLevelCompletion() {
                const foundInLevel = this.foundWords[this.currentLevel] || [];
                const totalInLevel = this.getTotalWordsForLevel(this.currentLevel);
                
                if (foundInLevel.length >= totalInLevel) {
                    const completionTime = Math.floor((Date.now() - this.levelStartTime) / 1000);
                    const levelKey = `level_${this.currentLevel}_${this.currentCategory}`;
                    
                    if (!this.gameStats.fastestCompletions[levelKey] || 
                        completionTime < this.gameStats.fastestCompletions[levelKey]) {
                        this.gameStats.fastestCompletions[levelKey] = completionTime;
                    }
                    
                    this.gameStats.totalLevelsCompleted++;
                    this.checkAchievements();
                    
                    setTimeout(() => {
                        this.showMessage(`üéâ Level ${this.currentLevel} completed! Moving to next level...`, 'success');
                        if (this.currentLevel < this.maxLevel) {
                            this.switchLevel(this.currentLevel + 1);
                        } else {
                            this.showMessage('üèÜ Congratulations! You completed all levels!', 'success');
                        }
                        this.createLevelButtons();
                        this.updateDisplay();
                    }, 1500);
                }
            }

            checkAchievements() {
                const achievements = [];
                
                // Streak achievements
                if (this.gameStats.currentStreak >= 7 && !this.gameStats.achievements.includes('week_streak')) {
                    achievements.push('üî• 7-Day Streak');
                    this.gameStats.achievements.push('week_streak');
                }
                
                if (this.gameStats.currentStreak >= 30 && !this.gameStats.achievements.includes('month_streak')) {
                    achievements.push('üíØ 30-Day Streak');
                    this.gameStats.achievements.push('month_streak');
                }
                
                // Word count achievements
                if (this.gameStats.totalWordsFound >= 100 && !this.gameStats.achievements.includes('hundred_words')) {
                    achievements.push('üìù 100 Words');
                    this.gameStats.achievements.push('hundred_words');
                }
                
                if (this.gameStats.totalWordsFound >= 500 && !this.gameStats.achievements.includes('five_hundred_words')) {
                    achievements.push('üìö 500 Words');
                    this.gameStats.achievements.push('five_hundred_words');
                }
                
                // Level completion achievements
                if (this.gameStats.totalLevelsCompleted >= 10 && !this.gameStats.achievements.includes('ten_levels')) {
                    achievements.push('üèÜ 10 Levels');
                    this.gameStats.achievements.push('ten_levels');
                }
                
                // Show new achievements
                achievements.forEach(achievement => {
                    setTimeout(() => {
                        this.showMessage(`üéâ Achievement Unlocked: ${achievement}!`, 'success');
                    }, 500);
                });
                
                this.updateStatsDisplay();
            }

            checkDailyLogin() {
                const today = new Date().toDateString();
                const lastPlay = this.gameStats.lastPlayDate;
                
                if (lastPlay) {
                    const lastDate = new Date(lastPlay);
                    const todayDate = new Date(today);
                    const diffTime = todayDate - lastDate;
                    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                    
                    if (diffDays === 1) {
                        this.gameStats.currentStreak++;
                        this.showMessage(`üî• Daily streak: ${this.gameStats.currentStreak} days!`, 'success');
                    } else if (diffDays > 1) {
                        this.gameStats.currentStreak = 1;
                    }
                } else {
                    this.gameStats.currentStreak = 1;
                }
                
                this.gameStats.lastPlayDate = today;
                this.updateStatsDisplay();
                this.saveGameState();
            }

            watchAdForHint() {
                this.showMessage('Watching ad...', 'info');
                setTimeout(() => {
                    this.showHintChoiceModal();
                }, 2000);
            }

            showHintChoiceModal() {
                this.elements.hintChoiceModal.style.display = 'flex';
            }

            closeHintChoiceModal() {
                this.elements.hintChoiceModal.style.display = 'none';
            }

            applySelectedHint(type) {
                const availableWords = this.getAvailableWordsForLevel(this.currentLevel);
                const foundInLevel = this.foundWords[this.currentLevel] || [];
                const remainingWords = availableWords.filter(word => !foundInLevel.includes(word));
                
                if (remainingWords.length === 0) {
                    this.showMessage('All available words discovered! No hints needed.', 'info');
                    return;
                }
                
                switch(type) {
                    case 'letter':
                        this.showLetterHint(remainingWords);
                        break;
                    case 'keyboard':
                        this.showMessage('Keyboard hint feature coming soon!', 'info');
                        break;
                    case 'basic':
                        this.showBasicHint(remainingWords);
                        break;
                    case 'scramble':
                        this.showMessage('Scramble game feature coming soon!', 'info');
                        break;
                }
            }

            showLetterHint(remainingWords) {
                const randomWord = remainingWords[Math.floor(Math.random() * remainingWords.length)];
                const randomLetter = randomWord[Math.floor(Math.random() * randomWord.length)];
                
                this.elements.hintDisplay.innerHTML = `üí° <strong>Letter Hint:</strong> One word contains the letter "<span style="color: #6aaa64; text-transform: uppercase;">${randomLetter}</span>"`;
                this.elements.hintDisplay.style.display = 'block';
                
                setTimeout(() => {
                    this.elements.hintDisplay.style.display = 'none';
                }, 10000);
                
                this.showMessage('Letter hint revealed!', 'success');
            }

            showBasicHint(remainingWords) {
                if (remainingWords.length <= 3) {
                    const randomWord = remainingWords[Math.floor(Math.random() * remainingWords.length)];
                    this.elements.hintDisplay.innerHTML = `üí° <strong>Hint:</strong> Try the word "<span style="color: #6aaa64; text-transform: uppercase;">${randomWord}</span>"`;
                } else {
                    const randomWord = remainingWords[Math.floor(Math.random() * remainingWords.length)];
                    this.elements.hintDisplay.innerHTML = `üí° <strong>Hint:</strong> One word starts with "<span style="color: #6aaa64; text-transform: uppercase;">${randomWord[0]}</span>"`;
                }
                
                this.elements.hintDisplay.style.display = 'block';
                
                setTimeout(() => {
                    this.elements.hintDisplay.style.display = 'none';
                }, 10000);
                
                this.showMessage('Basic hint revealed!', 'success');
            }

            resetCurrentLevel() {
                if (confirm('Reset current level progress?')) {
                    this.foundWords[this.currentLevel] = [];
                    this.attemptedWords[this.currentLevel] = [];
                    this.levelStartTime = null;
                    this.updateDisplay();
                    this.showMessage('Level reset successfully', 'success');
                    this.saveGameState();
                }
            }

            resetEntireGame() {
                if (confirm('Reset entire game progress?')) {
                    this.foundWords = {};
                    this.attemptedWords = {};
                    this.gameStats = {
                        currentStreak: 0,
                        totalWordsFound: 0,
                        totalLevelsCompleted: 0,
                        achievements: [],
                        lastPlayDate: null,
                        fastestCompletions: {}
                    };
                    this.currentLevel = 1;
                    this.levelStartTime = null;
                    this.updateInputMaxLength();
                    this.updateDisplay();
                    this.updateStatsDisplay();
                    this.createLevelButtons();
                    this.showMessage('Game reset successfully', 'success');
                    this.saveGameState();
                }
            }

            shareProgress() {
                const stats = {
                    streak: this.gameStats.currentStreak,
                    totalWords: this.gameStats.totalWordsFound,
                    totalLevels: this.gameStats.totalLevelsCompleted,
                    achievements: this.gameStats.achievements.length
                };
                
                const shareText = `üéÆ Progressive Wordle Grind Stats:
üî• ${stats.streak} day streak
üìù ${stats.totalWords} words found
üèÜ ${stats.totalLevels} levels completed
üèÖ ${stats.achievements} achievements unlocked

Play at: ${window.location.href}`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'Progressive Wordle Grind - My Stats',
                        text: shareText
                    }).catch(console.error);
                } else {
                    navigator.clipboard.writeText(shareText).then(() => {
                        this.showMessage('Stats copied to clipboard!', 'success');
                    }).catch(() => {
                        alert(shareText);
                    });
                }
            }

            updateDisplay() {
                this.elements.currentLevel.textContent = this.currentLevel;
                this.elements.wordLength.textContent = this.currentLevel + 1;
                
                const foundInLevel = this.foundWords[this.currentLevel] || [];
                const totalInLevel = this.getTotalWordsForLevel(this.currentLevel);
                const progressPercent = totalInLevel > 0 ? Math.round((foundInLevel.length / totalInLevel) * 100) : 0;
                
                this.elements.foundCount.textContent = foundInLevel.length;
                this.elements.totalCount.textContent = totalInLevel;
                this.elements.progressPercent.textContent = progressPercent;
                
                // Update found words grid
                this.elements.foundWordsGrid.innerHTML = '';
                foundInLevel.forEach(word => {
                    const wordElement = document.createElement('div');
                    wordElement.className = 'word-item';
                    wordElement.textContent = word.toUpperCase();
                    this.elements.foundWordsGrid.appendChild(wordElement);
                });
            }

            updateStatsDisplay() {
                this.elements.currentStreak.textContent = this.gameStats.currentStreak;
                this.elements.totalWords.textContent = this.gameStats.totalWordsFound;
                this.elements.totalLevels.textContent = this.gameStats.totalLevelsCompleted;
                this.elements.achievements.textContent = this.gameStats.achievements.length;
            }

            showFeedback(text, type) {
                this.elements.feedback.textContent = text;
                this.elements.feedback.className = `feedback ${type}`;
                this.elements.feedback.style.display = 'block';
                
                setTimeout(() => {
                    this.elements.feedback.style.display = 'none';
                }, 3000);
            }

            showMessage(text, type) {
                this.elements.message.textContent = text;
                this.elements.message.className = `message ${type}`;
                this.elements.message.style.display = 'block';
                
                setTimeout(() => {
                    this.elements.message.style.display = 'none';
                }, 3000);
            }

            clearFeedback() {
                this.elements.feedback.style.display = 'none';
                this.elements.message.style.display = 'none';
            }

            saveGameState() {
                const gameState = {
                    currentLevel: this.currentLevel,
                    currentCategory: this.currentCategory,
                    foundWords: this.foundWords,
                    attemptedWords: this.attemptedWords,
                    gameStats: this.gameStats,
                    levelStartTime: this.levelStartTime
                };
                
                localStorage.setItem('progressiveWordleGame', JSON.stringify(gameState));
            }

            loadGameState() {
                try {
                    const saved = localStorage.getItem('progressiveWordleGame');
                    if (saved) {
                        const data = JSON.parse(saved);
                        this.currentLevel = data.currentLevel || 1;
                        this.currentCategory = data.currentCategory || 'general';
                        this.foundWords = data.foundWords || {};
                        this.attemptedWords = data.attemptedWords || {};
                        this.gameStats = data.gameStats || this.gameStats;
                        this.levelStartTime = data.levelStartTime || null;
                        this.wordLists = this.categoryWordLists[this.currentCategory];
                        this.updateInputMaxLength();
                    }
                } catch (e) {
                    console.error('Error loading game state:', e);
                }
            }
        }

        // Initialize the game when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new ProgressiveWordleGame();
        });
    </script>
</body>
</html>